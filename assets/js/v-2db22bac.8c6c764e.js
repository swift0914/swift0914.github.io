"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[730],{1156:(n,s,a)=>{a.r(s),a.d(s,{data:()=>e});const e={key:"v-2db22bac",path:"/share/formValidate/",title:"简单实现 Element 表单及验证功能",lang:"en-US",frontmatter:{},excerpt:"",headers:[{level:2,title:"1、Element 表单结构",slug:"_1、element-表单结构",children:[{level:3,title:"功能分析",slug:"功能分析",children:[]}]},{level:2,title:"2、基础结构搭建",slug:"_2、基础结构搭建",children:[{level:3,title:"1. FormInput 的实现",slug:"_1-forminput-的实现",children:[]},{level:3,title:"2. FormItem 的实现",slug:"_2-formitem-的实现",children:[]},{level:3,title:"3. Form 的实现",slug:"_3-form-的实现",children:[]}]},{level:2,title:"3、校验功能",slug:"_3、校验功能",children:[{level:3,title:"1. 校验开源库 async-validator 介绍",slug:"_1-校验开源库-async-validator-介绍",children:[]},{level:3,title:"2. 何时触发校验、何处执行校验",slug:"_2-何时触发校验、何处执行校验",children:[]},{level:3,title:"Form 改造",slug:"form-改造",children:[]},{level:3,title:"FormItem 改造",slug:"formitem-改造",children:[]},{level:3,title:"FormInput 改造",slug:"forminput-改造",children:[]}]},{level:2,title:"4、不足及终极方案",slug:"_4、不足及终极方案",children:[{level:3,title:"Form",slug:"form",children:[]},{level:3,title:"FormItem",slug:"formitem",children:[]},{level:3,title:"FormInput",slug:"forminput",children:[]}]}],filePathRelative:"share/formValidate/README.md",git:{updatedTime:1640830694e3,contributors:[{name:"swift",email:"sun.wenhao@mwee.cn",commits:2},{name:"swift",email:"962498816@qq.com",commits:1}]}}},4125:(n,s,a)=>{a.r(s),a.d(s,{default:()=>sn});var e=a(6252),t=a(9945);const l=(0,e._)("h1",{id:"简单实现-element-表单及验证功能",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#简单实现-element-表单及验证功能","aria-hidden":"true"},"#"),(0,e.Uk)(" 简单实现 Element 表单及验证功能")],-1),p=(0,e._)("div",{class:"custom-container tip"},[(0,e._)("p",{class:"custom-container-title"},"TIP"),(0,e._)("p",null,"表单是前端非常常见的功能，表单验证也是必不可少的。 通过既定的规则验证用户输入内容，并友好提示校验结果，从而得到更好的用户体验。 主流的 web UI Element 在表单验证功能非常完善。此教程仅封装 Input 的校验功能，如对其他 form（select、textarea 等）组件感兴趣可自行研究。")],-1),c=(0,e._)("h2",{id:"_1、element-表单结构",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#_1、element-表单结构","aria-hidden":"true"},"#"),(0,e.Uk)(" 1、Element 表单结构")],-1),o=(0,e._)("div",{class:"language-vue ext-vue line-numbers-mode"},[(0,e._)("pre",{class:"language-vue"},[(0,e._)("code",null,[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"<"),(0,e.Uk)("template")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"<"),(0,e.Uk)("el-form")]),(0,e.Uk)(),(0,e._)("span",{class:"token attr-name"},":model"),(0,e._)("span",{class:"token attr-value"},[(0,e._)("span",{class:"token punctuation attr-equals"},"="),(0,e._)("span",{class:"token punctuation"},'"'),(0,e.Uk)("form"),(0,e._)("span",{class:"token punctuation"},'"')]),(0,e.Uk)(),(0,e._)("span",{class:"token attr-name"},":rules"),(0,e._)("span",{class:"token attr-value"},[(0,e._)("span",{class:"token punctuation attr-equals"},"="),(0,e._)("span",{class:"token punctuation"},'"'),(0,e.Uk)("rules"),(0,e._)("span",{class:"token punctuation"},'"')]),(0,e.Uk)(),(0,e._)("span",{class:"token attr-name"},"ref"),(0,e._)("span",{class:"token attr-value"},[(0,e._)("span",{class:"token punctuation attr-equals"},"="),(0,e._)("span",{class:"token punctuation"},'"'),(0,e.Uk)("form"),(0,e._)("span",{class:"token punctuation"},'"')]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"<"),(0,e.Uk)("el-form-item")]),(0,e.Uk)(),(0,e._)("span",{class:"token attr-name"},"label"),(0,e._)("span",{class:"token attr-value"},[(0,e._)("span",{class:"token punctuation attr-equals"},"="),(0,e._)("span",{class:"token punctuation"},'"'),(0,e.Uk)("用户名"),(0,e._)("span",{class:"token punctuation"},'"')]),(0,e.Uk)(),(0,e._)("span",{class:"token attr-name"},"prop"),(0,e._)("span",{class:"token attr-value"},[(0,e._)("span",{class:"token punctuation attr-equals"},"="),(0,e._)("span",{class:"token punctuation"},'"'),(0,e.Uk)("username"),(0,e._)("span",{class:"token punctuation"},'"')]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"<"),(0,e.Uk)("el-input")]),(0,e.Uk)(),(0,e._)("span",{class:"token attr-name"},"v-model"),(0,e._)("span",{class:"token attr-value"},[(0,e._)("span",{class:"token punctuation attr-equals"},"="),(0,e._)("span",{class:"token punctuation"},'"'),(0,e.Uk)("form.username"),(0,e._)("span",{class:"token punctuation"},'"')]),(0,e.Uk)(),(0,e._)("span",{class:"token attr-name"},"placeholder"),(0,e._)("span",{class:"token attr-value"},[(0,e._)("span",{class:"token punctuation attr-equals"},"="),(0,e._)("span",{class:"token punctuation"},'"'),(0,e.Uk)("请输入用户名"),(0,e._)("span",{class:"token punctuation"},'"')]),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"/>")]),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"</"),(0,e.Uk)("el-form-item")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"<"),(0,e.Uk)("el-form-item")]),(0,e.Uk)(),(0,e._)("span",{class:"token attr-name"},"label"),(0,e._)("span",{class:"token attr-value"},[(0,e._)("span",{class:"token punctuation attr-equals"},"="),(0,e._)("span",{class:"token punctuation"},'"'),(0,e.Uk)("密码"),(0,e._)("span",{class:"token punctuation"},'"')]),(0,e.Uk)(),(0,e._)("span",{class:"token attr-name"},"prop"),(0,e._)("span",{class:"token attr-value"},[(0,e._)("span",{class:"token punctuation attr-equals"},"="),(0,e._)("span",{class:"token punctuation"},'"'),(0,e.Uk)("password"),(0,e._)("span",{class:"token punctuation"},'"')]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"<"),(0,e.Uk)("el-input")]),(0,e.Uk)("\n        "),(0,e._)("span",{class:"token attr-name"},"v-model"),(0,e._)("span",{class:"token attr-value"},[(0,e._)("span",{class:"token punctuation attr-equals"},"="),(0,e._)("span",{class:"token punctuation"},'"'),(0,e.Uk)("form.password"),(0,e._)("span",{class:"token punctuation"},'"')]),(0,e.Uk)("\n        "),(0,e._)("span",{class:"token attr-name"},"type"),(0,e._)("span",{class:"token attr-value"},[(0,e._)("span",{class:"token punctuation attr-equals"},"="),(0,e._)("span",{class:"token punctuation"},'"'),(0,e.Uk)("password"),(0,e._)("span",{class:"token punctuation"},'"')]),(0,e.Uk)("\n        "),(0,e._)("span",{class:"token attr-name"},"placeholder"),(0,e._)("span",{class:"token attr-value"},[(0,e._)("span",{class:"token punctuation attr-equals"},"="),(0,e._)("span",{class:"token punctuation"},'"'),(0,e.Uk)("请输入密码"),(0,e._)("span",{class:"token punctuation"},'"')]),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token punctuation"},"/>")]),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"</"),(0,e.Uk)("el-form-item")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"<"),(0,e.Uk)("el-form-item")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"<"),(0,e.Uk)("el-button")]),(0,e.Uk)(),(0,e._)("span",{class:"token attr-name"},"@click"),(0,e._)("span",{class:"token attr-value"},[(0,e._)("span",{class:"token punctuation attr-equals"},"="),(0,e._)("span",{class:"token punctuation"},'"'),(0,e.Uk)("submitForm("),(0,e._)("span",{class:"token punctuation"},"'"),(0,e.Uk)("form"),(0,e._)("span",{class:"token punctuation"},"'"),(0,e.Uk)(")"),(0,e._)("span",{class:"token punctuation"},'"')]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("登录"),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"</"),(0,e.Uk)("el-button")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"</"),(0,e.Uk)("el-form-item")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"</"),(0,e.Uk)("el-form")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"</"),(0,e.Uk)("template")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"<"),(0,e.Uk)("script")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e._)("span",{class:"token script"},[(0,e._)("span",{class:"token language-javascript"},[(0,e.Uk)("\n"),(0,e._)("span",{class:"token function"},"submitForm"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token parameter"},"formName"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token keyword"},"this"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("$refs"),(0,e._)("span",{class:"token punctuation"},"["),(0,e.Uk)("formName"),(0,e._)("span",{class:"token punctuation"},"]"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"validate"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token parameter"},"valid"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},"=>"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token keyword"},"if"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("valid"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token function"},"alert"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token string"},"'submit!'"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"else"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n      console"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"log"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token string"},"'error submit!!'"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token keyword"},"return"),(0,e.Uk)(),(0,e._)("span",{class:"token boolean"},"false"),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n")])]),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"</"),(0,e.Uk)("script")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n")])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"13"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"14"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"15"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"16"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"17"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"18"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"19"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"20"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"21"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"22"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"23"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"24"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"25"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"26"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"27"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"28"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"29"),(0,e._)("br")])],-1),_=(0,e._)("h3",{id:"功能分析",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#功能分析","aria-hidden":"true"},"#"),(0,e.Uk)(" 功能分析")],-1),r=(0,e._)("p",null,[(0,e._)("img",{src:t,alt:"思维导图"})],-1),u=(0,e._)("h2",{id:"_2、基础结构搭建",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#_2、基础结构搭建","aria-hidden":"true"},"#"),(0,e.Uk)(" 2、基础结构搭建")],-1),i=(0,e._)("h3",{id:"_1-forminput-的实现",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#_1-forminput-的实现","aria-hidden":"true"},"#"),(0,e.Uk)(" 1. FormInput 的实现")],-1),k=(0,e._)("div",{class:"custom-container tip"},[(0,e._)("p",{class:"custom-container-title"},"主要功能"),(0,e._)("ul",null,[(0,e._)("li",null,"input 类型的绑定"),(0,e._)("li",null,"自定义组件双向数据绑定的实现"),(0,e._)("li",null,'组件不作为 props 的 attribues 通过 v-bind="$attrs" 传递给 input(placeholder)')])],-1),m=(0,e._)("div",{class:"language-vue ext-vue line-numbers-mode"},[(0,e._)("pre",{class:"language-vue"},[(0,e._)("code",null,[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"<"),(0,e.Uk)("template")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"<"),(0,e.Uk)("div")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token comment"},'\x3c!-- \n      1、input 类型\n      2、自定义组件双向数据绑定的实现\n      3、组件不作为 props 的attribues 通过 v-bind="$attrs" 传递给input\n    --\x3e'),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"<"),(0,e.Uk)("input")]),(0,e.Uk)(),(0,e._)("span",{class:"token attr-name"},":type"),(0,e._)("span",{class:"token attr-value"},[(0,e._)("span",{class:"token punctuation attr-equals"},"="),(0,e._)("span",{class:"token punctuation"},'"'),(0,e.Uk)("type"),(0,e._)("span",{class:"token punctuation"},'"')]),(0,e.Uk)(),(0,e._)("span",{class:"token attr-name"},":value"),(0,e._)("span",{class:"token attr-value"},[(0,e._)("span",{class:"token punctuation attr-equals"},"="),(0,e._)("span",{class:"token punctuation"},'"'),(0,e.Uk)("value"),(0,e._)("span",{class:"token punctuation"},'"')]),(0,e.Uk)(),(0,e._)("span",{class:"token attr-name"},"@input"),(0,e._)("span",{class:"token attr-value"},[(0,e._)("span",{class:"token punctuation attr-equals"},"="),(0,e._)("span",{class:"token punctuation"},'"'),(0,e.Uk)("handleInput"),(0,e._)("span",{class:"token punctuation"},'"')]),(0,e.Uk)(),(0,e._)("span",{class:"token attr-name"},"v-bind"),(0,e._)("span",{class:"token attr-value"},[(0,e._)("span",{class:"token punctuation attr-equals"},"="),(0,e._)("span",{class:"token punctuation"},'"'),(0,e.Uk)("$attrs"),(0,e._)("span",{class:"token punctuation"},'"')]),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"/>")]),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"</"),(0,e.Uk)("div")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"</"),(0,e.Uk)("template")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n\n"),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"<"),(0,e.Uk)("script")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e._)("span",{class:"token script"},[(0,e._)("span",{class:"token language-javascript"},[(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"export"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"default"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  inheritAttrs"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token boolean"},"false"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(),(0,e._)("span",{class:"token comment"},"// 去除根元素绑定非 props 的 attribues"),(0,e.Uk)("\n  props"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n    type"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n      type"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(" String"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token keyword"},"default"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"text"'),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    value"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n      type"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(" String"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n  methods"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token function"},"handleInput"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token parameter"},"e"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token keyword"},"this"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"$emit"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token string"},'"input"'),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(" e"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("target"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("value"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n")])]),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"</"),(0,e.Uk)("script")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n")])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"13"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"14"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"15"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"16"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"17"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"18"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"19"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"20"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"21"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"22"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"23"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"24"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"25"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"26"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"27"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"28"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"29"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"30"),(0,e._)("br")])],-1),b=(0,e._)("h3",{id:"_2-formitem-的实现",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#_2-formitem-的实现","aria-hidden":"true"},"#"),(0,e.Uk)(" 2. FormItem 的实现")],-1),d=(0,e._)("div",{class:"custom-container tip"},[(0,e._)("p",{class:"custom-container-title"},"主要功能"),(0,e._)("ul",null,[(0,e._)("li",null,"FormInput 插槽"),(0,e._)("li",null,"label 展示"),(0,e._)("li",null,"校验失败消息的展示")])],-1),U=(0,e._)("div",{class:"language-vue ext-vue line-numbers-mode"},[(0,e._)("pre",{class:"language-vue"},[(0,e._)("code",null,[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"<"),(0,e.Uk)("template")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"<"),(0,e.Uk)("div")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token comment"},"\x3c!-- 标签文案 --\x3e"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"<"),(0,e.Uk)("p")]),(0,e.Uk)(),(0,e._)("span",{class:"token attr-name"},"class"),(0,e._)("span",{class:"token attr-value"},[(0,e._)("span",{class:"token punctuation attr-equals"},"="),(0,e._)("span",{class:"token punctuation"},'"'),(0,e.Uk)("label"),(0,e._)("span",{class:"token punctuation"},'"')]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("{{ label }}"),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"</"),(0,e.Uk)("p")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token comment"},"\x3c!-- input 的插槽 --\x3e"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"<"),(0,e.Uk)("slot")]),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"/>")]),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token comment"},"\x3c!-- 校验的提示 --\x3e"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"<"),(0,e.Uk)("p")]),(0,e.Uk)(),(0,e._)("span",{class:"token attr-name"},"class"),(0,e._)("span",{class:"token attr-value"},[(0,e._)("span",{class:"token punctuation attr-equals"},"="),(0,e._)("span",{class:"token punctuation"},'"'),(0,e.Uk)("error"),(0,e._)("span",{class:"token punctuation"},'"')]),(0,e.Uk)(),(0,e._)("span",{class:"token attr-name"},"v-if"),(0,e._)("span",{class:"token attr-value"},[(0,e._)("span",{class:"token punctuation attr-equals"},"="),(0,e._)("span",{class:"token punctuation"},'"'),(0,e.Uk)("error"),(0,e._)("span",{class:"token punctuation"},'"')]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("{{ error }}"),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"</"),(0,e.Uk)("p")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"</"),(0,e.Uk)("div")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"</"),(0,e.Uk)("template")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n\n"),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"<"),(0,e.Uk)("script")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e._)("span",{class:"token script"},[(0,e._)("span",{class:"token language-javascript"},[(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"export"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"default"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  props"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n    label"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n      type"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(" String"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    prop"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n      type"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(" String"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token function"},"data"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token keyword"},"return"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n      error"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'""'),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n")])]),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"</"),(0,e.Uk)("script")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n")])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"13"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"14"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"15"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"16"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"17"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"18"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"19"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"20"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"21"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"22"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"23"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"24"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"25"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"26"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"27"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"28"),(0,e._)("br")])],-1),f=(0,e._)("h3",{id:"_3-form-的实现",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#_3-form-的实现","aria-hidden":"true"},"#"),(0,e.Uk)(" 3. Form 的实现")],-1),g=(0,e._)("div",{class:"language-vue ext-vue line-numbers-mode"},[(0,e._)("pre",{class:"language-vue"},[(0,e._)("code",null,[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"<"),(0,e.Uk)("template")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"<"),(0,e.Uk)("div")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token comment"},"\x3c!-- 展示 FormItem 插槽 --\x3e"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"<"),(0,e.Uk)("slot")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"</"),(0,e.Uk)("slot")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"</"),(0,e.Uk)("div")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"</"),(0,e.Uk)("template")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"<"),(0,e.Uk)("script")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e._)("span",{class:"token script"},[(0,e._)("span",{class:"token language-javascript"},[(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"export"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"default"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  props"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n    model"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token comment"},"// 绑定的数据"),(0,e.Uk)("\n      type"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(" Object"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    rules"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token comment"},"// 校验的规则"),(0,e.Uk)("\n      type"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(" Object"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n")])]),(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token tag"},[(0,e._)("span",{class:"token punctuation"},"</"),(0,e.Uk)("script")]),(0,e._)("span",{class:"token punctuation"},">")]),(0,e.Uk)("\n")])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"13"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"14"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"15"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"16"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"17"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"18"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"19"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"20"),(0,e._)("br")])],-1),h=(0,e._)("h2",{id:"_3、校验功能",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#_3、校验功能","aria-hidden":"true"},"#"),(0,e.Uk)(" 3、校验功能")],-1),v=(0,e._)("h3",{id:"_1-校验开源库-async-validator-介绍",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#_1-校验开源库-async-validator-介绍","aria-hidden":"true"},"#"),(0,e.Uk)(" 1. 校验开源库 async-validator 介绍")],-1),x={href:"https://www.npmjs.com/package/async-validator",target:"_blank",rel:"noopener noreferrer"},y=(0,e.Uk)("async-validator"),w=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"language-javascript"},[(0,e._)("code",null,[(0,e._)("span",{class:"token keyword"},"import"),(0,e.Uk)(" Schema "),(0,e._)("span",{class:"token keyword"},"from"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"async-validator"'),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"const"),(0,e.Uk)(" descriptor "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token comment"},"// 校验的表述"),(0,e.Uk)("\n  name"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"["),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n      type"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"string"'),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n      required"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token boolean"},"true"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n      message"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"名称不能为空"'),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n      min"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token number"},"3"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n      max"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token number"},"5"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n      message"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"长度在 3 到 5 个字符"'),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},"]"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n  age"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"["),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n    type"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"number"'),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token function-variable function"},"asyncValidator"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token parameter"},[(0,e.Uk)("rule"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(" value")]),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},"=>"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token keyword"},"return"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"new"),(0,e.Uk)(),(0,e._)("span",{class:"token class-name"},"Promise"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token parameter"},[(0,e.Uk)("resolve"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(" reject")]),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},"=>"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n        "),(0,e._)("span",{class:"token keyword"},"if"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("value "),(0,e._)("span",{class:"token operator"},"<"),(0,e.Uk)(),(0,e._)("span",{class:"token number"},"18"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n          rule"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("message "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"少儿不宜"'),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n          "),(0,e._)("span",{class:"token function"},"reject"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token string"},'"too young"'),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)(),(0,e._)("span",{class:"token comment"},"// reject with error message"),(0,e.Uk)("\n        "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"else"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n          "),(0,e._)("span",{class:"token function"},"resolve"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n        "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},"]"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"const"),(0,e.Uk)(" validator "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"new"),(0,e.Uk)(),(0,e._)("span",{class:"token class-name"},"Schema"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("descriptor"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token doc-comment comment"},"/** validate(source, [options], callback): Promise\n *  source: 需要校验的对象（必选）\n *  options: 描述校验的处理选项的对象（可选）\n *  callback: 当校验完成时调用的回调函数（必选）\n */"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token comment"},"// 同步校验"),(0,e.Uk)("\nvalidator"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"validate"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)(" name"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'""'),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token parameter"},"errors"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},"=>"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token keyword"},"if"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("errors"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token comment"},"// 校验不通过 do something"),(0,e.Uk)("\n    console"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"log"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("errors"),(0,e._)("span",{class:"token punctuation"},"["),(0,e._)("span",{class:"token number"},"0"),(0,e._)("span",{class:"token punctuation"},"]"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("message"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token keyword"},"return"),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token comment"},"// 校验通过 do something"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token comment"},"// 异步校验"),(0,e.Uk)("\nvalidator\n  "),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"validate"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)(" name"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token string"},'"swift"'),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(" age"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token number"},"16"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"then"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"catch"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token parameter"},[(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)(" errors "),(0,e._)("span",{class:"token punctuation"},"}")]),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token operator"},"=>"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n    console"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"log"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("errors"),(0,e._)("span",{class:"token punctuation"},"["),(0,e._)("span",{class:"token number"},"0"),(0,e._)("span",{class:"token punctuation"},"]"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("message"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n")])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"13"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"14"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"15"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"16"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"17"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"18"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"19"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"20"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"21"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"22"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"23"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"24"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"25"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"26"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"27"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"28"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"29"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"30"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"31"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"32"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"33"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"34"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"35"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"36"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"37"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"38"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"39"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"40"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"41"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"42"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"43"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"44"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"45"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"46"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"47"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"48"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"49"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"50"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"51"),(0,e._)("br")])],-1),F=(0,e._)("h3",{id:"_2-何时触发校验、何处执行校验",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#_2-何时触发校验、何处执行校验","aria-hidden":"true"},"#"),(0,e.Uk)(" 2. 何时触发校验、何处执行校验")],-1),I=(0,e._)("ul",null,[(0,e._)("li",null,[(0,e._)("p",null,"input 触发 input 事件就应触发校验")]),(0,e._)("li",null,[(0,e._)("p",null,"点击提交按钮触发校验")]),(0,e._)("li",null,[(0,e._)("p",null,"校验的提示及方法在 FormItem 组件内部（组件间的低耦合 复用性）")])],-1),$=(0,e._)("h3",{id:"form-改造",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#form-改造","aria-hidden":"true"},"#"),(0,e.Uk)(" Form 改造")],-1),j=(0,e._)("div",{class:"custom-container warning"},[(0,e._)("p",{class:"custom-container-title"},"组建通信"),(0,e._)("p",null,"model rules 的值在 Form 组件中，需要传递给 FormItem 作校验时使用，而 Form 组件中只有 slot，无法使用 prop 进行组件同行。 使用 provide/inject 进行跨层级通信。"),(0,e._)("h6",{id:"添加功能",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#添加功能","aria-hidden":"true"},"#"),(0,e.Uk)(" 添加功能")]),(0,e._)("ul",null,[(0,e._)("li",null,"组件跨层通信"),(0,e._)("li",null,"提供 validate 方法供提交按钮使用")])],-1),q=(0,e._)("div",{class:"language-diff ext-diff line-numbers-mode"},[(0,e._)("pre",{class:"language-diff"},[(0,e._)("code",null,[(0,e._)("span",{class:"token inserted-sign inserted"},[(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"}," provide() {\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"},"   return {\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"},"     form: this\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"},"   }\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"}," }\n")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"token inserted-sign inserted"},[(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"}," methods: {\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"},"   validate(cb) { // 供提交按钮使用 触发所有校验函数 返回一个boolean 所有校验通过 true 否则 false\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"},"     // 注意判断一下子组件是否有 prop 提交按钮的 FormItem 无校验\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"},"     const result = this.$children.reduce((prev, curr) => curr.prop ? prev.concat(curr.invalide()) : prev, []).every(item => item)\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"},"     cb(result)\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"},"   }\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"}," }\n")])])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"13"),(0,e._)("br")])],-1),N=(0,e._)("h3",{id:"formitem-改造",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#formitem-改造","aria-hidden":"true"},"#"),(0,e.Uk)(" FormItem 改造")],-1),E=(0,e._)("div",{class:"custom-container tip"},[(0,e._)("p",{class:"custom-container-title"},"添加功能"),(0,e._)("ul",null,[(0,e._)("li",null,"接受 Form 组件传递的 model、rules"),(0,e._)("li",null,"添加校验函数"),(0,e._)("li",null,"监听 FormInput 触发的校验方法")])],-1),S=(0,e._)("div",{class:"language-diff ext-diff line-numbers-mode"},[(0,e._)("pre",{class:"language-diff"},[(0,e._)("code",null,[(0,e._)("span",{class:"token inserted-sign inserted"},[(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"}," import Schema from 'async-validator';\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"}," inject: ['form']\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"}," mounted() {\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"},"   this.$on('invalide', () => this.invalide())\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"}," },\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"}," methods: {\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"},"   invalide() {\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"},"     const { model, rules } = this.form // 当前表单值 和 校验的规则\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"},"     const desc = { // 校验描述\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"},"       [this.prop]: rules[this.prop]\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"},"     }\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"},"     const validator = new Schema(desc)\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"},"     // validate 返回的 promise return供 Form的validate函数使用\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"},"     validator.validate(({ [this.prop]: model[this.prop] }), (errors) => {\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"},"       this.error = errors ? errors[0].message : ''\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"},"     })\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"},"     return this.error ? false : true\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"},"   }\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"}," }\n")])])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"13"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"14"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"15"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"16"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"17"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"18"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"19"),(0,e._)("br")])],-1),W=(0,e._)("h3",{id:"forminput-改造",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#forminput-改造","aria-hidden":"true"},"#"),(0,e.Uk)(" FormInput 改造")],-1),P=(0,e._)("div",{class:"custom-container tip"},[(0,e._)("p",{class:"custom-container-title"},"添加功能"),(0,e._)("ul",null,[(0,e._)("li",null,"触发校验")])],-1),O=(0,e._)("div",{class:"language-diff ext-diff line-numbers-mode"},[(0,e._)("pre",{class:"language-diff"},[(0,e._)("code",null,[(0,e.Uk)("handleInput(e) {\n"),(0,e._)("span",{class:"token unchanged"},[(0,e._)("span",{class:"token prefix unchanged"}," "),(0,e._)("span",{class:"token line"},'   this.$emit("input", e.target.value);\n')]),(0,e._)("span",{class:"token inserted-sign inserted"},[(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"},'   this.$parent.$emmit("invalide");\n')]),(0,e.Uk)("},\n")])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br")])],-1),V=(0,e._)("h2",{id:"_4、不足及终极方案",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#_4、不足及终极方案","aria-hidden":"true"},"#"),(0,e.Uk)(" 4、不足及终极方案")],-1),A=(0,e._)("div",{class:"custom-container warning"},[(0,e._)("p",{class:"custom-container-title"},"不足之处"),(0,e._)("p",null,"Form 中使用了 this.$children FormInput中使用了 this.$parent 组件之间耦合。"),(0,e._)("h5",{id:"最终方案",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#最终方案","aria-hidden":"true"},"#"),(0,e.Uk)(" 最终方案")]),(0,e._)("p",null,"使用 dispatch 的方式，派发事件，从而降低组件的耦合")],-1),C=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"language-javascript"},[(0,e._)("code",null,[(0,e._)("span",{class:"token comment"},"// emitter.js mixins混入"),(0,e.Uk)("\n"),(0,e._)("span",{class:"token keyword"},"export"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"default"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  methods"),(0,e._)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token doc-comment comment"},[(0,e.Uk)("/**\n     * 事件派发（自下而上） input => formItem  input 通知 formItem 触发检验事件\n     *                   formItem => form   每创建一个formItem 通知 form 收集一次 formItem 组件实例\n     * "),(0,e._)("span",{class:"token keyword"},"@param"),(0,e.Uk)(),(0,e._)("span",{class:"token class-name"},[(0,e._)("span",{class:"token punctuation"},"{"),(0,e._)("span",{class:"token operator"},"*"),(0,e._)("span",{class:"token punctuation"},"}")]),(0,e.Uk)(),(0,e._)("span",{class:"token parameter"},"componentName"),(0,e.Uk)(" 通知的组件\n     * "),(0,e._)("span",{class:"token keyword"},"@param"),(0,e.Uk)(),(0,e._)("span",{class:"token class-name"},[(0,e._)("span",{class:"token punctuation"},"{"),(0,e._)("span",{class:"token operator"},"*"),(0,e._)("span",{class:"token punctuation"},"}")]),(0,e.Uk)(),(0,e._)("span",{class:"token parameter"},"eventName"),(0,e.Uk)(" 派发的时间名称\n     * "),(0,e._)("span",{class:"token keyword"},"@param"),(0,e.Uk)(),(0,e._)("span",{class:"token class-name"},[(0,e._)("span",{class:"token punctuation"},"{"),(0,e._)("span",{class:"token operator"},"*"),(0,e._)("span",{class:"token punctuation"},"}")]),(0,e.Uk)(),(0,e._)("span",{class:"token parameter"},"params"),(0,e.Uk)(" 额外参数\n     */")]),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token function"},"dispatch"),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token parameter"},[(0,e.Uk)("componentName"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(" eventName"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(" params")]),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token keyword"},"var"),(0,e.Uk)(" parent "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"this"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("$parent "),(0,e._)("span",{class:"token operator"},"||"),(0,e.Uk)(),(0,e._)("span",{class:"token keyword"},"this"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("$root"),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token keyword"},"var"),(0,e.Uk)(" name "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(" parent"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("$options"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("componentName"),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n\n      "),(0,e._)("span",{class:"token keyword"},"while"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("parent "),(0,e._)("span",{class:"token operator"},"&&"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"("),(0,e._)("span",{class:"token operator"},"!"),(0,e.Uk)("name "),(0,e._)("span",{class:"token operator"},"||"),(0,e.Uk)(" name "),(0,e._)("span",{class:"token operator"},"!=="),(0,e.Uk)(" componentName"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n        parent "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(" parent"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("$parent"),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n\n        "),(0,e._)("span",{class:"token keyword"},"if"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("parent"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n          name "),(0,e._)("span",{class:"token operator"},"="),(0,e.Uk)(" parent"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("$options"),(0,e._)("span",{class:"token punctuation"},"."),(0,e.Uk)("componentName"),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n        "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token keyword"},"if"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("parent"),(0,e._)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n        parent"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"$emit"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"apply"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("parent"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)(),(0,e._)("span",{class:"token punctuation"},"["),(0,e.Uk)("eventName"),(0,e._)("span",{class:"token punctuation"},"]"),(0,e._)("span",{class:"token punctuation"},"."),(0,e._)("span",{class:"token function"},"concat"),(0,e._)("span",{class:"token punctuation"},"("),(0,e.Uk)("params"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},")"),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n      "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n    "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n  "),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},","),(0,e.Uk)("\n"),(0,e._)("span",{class:"token punctuation"},"}"),(0,e._)("span",{class:"token punctuation"},";"),(0,e.Uk)("\n")])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"13"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"14"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"15"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"16"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"17"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"18"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"19"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"20"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"21"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"22"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"23"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"24"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"25"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"26"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"27"),(0,e._)("br")])],-1),D=(0,e._)("h3",{id:"form",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#form","aria-hidden":"true"},"#"),(0,e.Uk)(" Form")],-1),R=(0,e._)("div",{class:"language-diff ext-diff line-numbers-mode"},[(0,e._)("pre",{class:"language-diff"},[(0,e._)("code",null,[(0,e._)("span",{class:"token inserted-sign inserted"},[(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"}," componentName: 'Form',\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"}," created() { // 收集每个FormItem组件实例\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"},"   this.fields = []\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"},"   this.$on('FormItem.addField', item => {\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"},"     if (item) this.fields.push(item)\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"},"   })\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"}," },\n")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"token inserted-sign inserted"},[(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"}," methods: {\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"},"   validate(cb) {\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"},"     // 执行所有 formItem 中的校验方法\n")]),(0,e._)("span",{class:"token deleted-sign deleted"},[(0,e._)("span",{class:"token prefix deleted"},"-"),(0,e._)("span",{class:"token line"},"     const result = this.$children.reduce((prev, curr) => curr.prop ? prev.concat(curr.invalide()) : prev, []).every(item => item)\n")]),(0,e._)("span",{class:"token inserted-sign inserted"},[(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"},"     const result = this.fields.map(field => field.invalide()).every(item => item)\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"},"   }\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"}," }\n")])])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"13"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"14"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"15"),(0,e._)("br")])],-1),T=(0,e._)("h3",{id:"formitem",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#formitem","aria-hidden":"true"},"#"),(0,e.Uk)(" FormItem")],-1),Z=(0,e._)("div",{class:"language-diff ext-diff line-numbers-mode"},[(0,e._)("pre",{class:"language-diff"},[(0,e._)("code",null,[(0,e._)("span",{class:"token inserted-sign inserted"},[(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"}," import emitter from '@/mixins/emitter'\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"}," mixins: [emitter],\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"}," componentName: 'FormItem',\n")]),(0,e.Uk)("mounted() {\n"),(0,e._)("span",{class:"token unchanged"},[(0,e._)("span",{class:"token prefix unchanged"}," "),(0,e._)("span",{class:"token line"},"  this.$on('invalide', () => this.invalide())\n")]),(0,e._)("span",{class:"token inserted-sign inserted"},[(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"},"  if (this.prop) this.dispatch('Form', 'FormItem.addField', [this])\n")]),(0,e.Uk)("},\n")])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br")])],-1),H=(0,e._)("h3",{id:"forminput",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#forminput","aria-hidden":"true"},"#"),(0,e.Uk)(" FormInput")],-1),L=(0,e._)("div",{class:"language-diff ext-diff line-numbers-mode"},[(0,e._)("pre",{class:"language-diff"},[(0,e._)("code",null,[(0,e._)("span",{class:"token inserted-sign inserted"},[(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"}," import emitter from '@/mixins/emitter'\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"}," mixins: [emitter],\n"),(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"}," methods: {\n")]),(0,e._)("span",{class:"token unchanged"},[(0,e._)("span",{class:"token prefix unchanged"}," "),(0,e._)("span",{class:"token line"}," handleInput(e) {\n"),(0,e._)("span",{class:"token prefix unchanged"}," "),(0,e._)("span",{class:"token line"},"   this.$emit('input', e.target.value)\n")]),(0,e._)("span",{class:"token deleted-sign deleted"},[(0,e._)("span",{class:"token prefix deleted"},"-"),(0,e._)("span",{class:"token line"},"     this.$parent.$emit('invalide')\n")]),(0,e._)("span",{class:"token inserted-sign inserted"},[(0,e._)("span",{class:"token prefix inserted"},"+"),(0,e._)("span",{class:"token line"},"     this.dispatch('FormItem', 'invalide')\n")]),(0,e._)("span",{class:"token unchanged"},[(0,e._)("span",{class:"token prefix unchanged"}," "),(0,e._)("span",{class:"token line"}," }\n")]),(0,e.Uk)("}\n")])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br")])],-1),M=(0,e._)("p",null,"参考资料",-1),Y={href:"https://cn.vuejs.org/v2/api/#vm-emit",target:"_blank",rel:"noopener noreferrer"},z=(0,e.Uk)("事件的监听和派发$on $emit"),B={href:"https://cn.vuejs.org/v2/api/#vm-attrs",target:"_blank",rel:"noopener noreferrer"},G=(0,e.Uk)("$attrs"),J={href:"https://github.com/ElemeFE/element/blob/dev/packages/form/src/form.vue",target:"_blank",rel:"noopener noreferrer"},K=(0,e.Uk)("element 表单封装"),Q={href:"https://github.com/ElemeFE/element/blob/dev/src/mixins/emitter.js",target:"_blank",rel:"noopener noreferrer"},X=(0,e.Uk)("element 组件的混入派发时间"),nn={},sn=(0,a(3744).Z)(nn,[["render",function(n,s){const a=(0,e.up)("OutboundLink");return(0,e.wg)(),(0,e.iD)(e.HY,null,[l,p,c,o,_,r,u,i,k,m,b,d,U,f,g,h,v,(0,e._)("p",null,[(0,e._)("a",x,[y,(0,e.Wm)(a)])]),w,F,I,$,j,q,N,E,S,W,P,O,V,A,C,D,R,T,Z,H,L,M,(0,e._)("ul",null,[(0,e._)("li",null,[(0,e._)("a",Y,[z,(0,e.Wm)(a)])]),(0,e._)("li",null,[(0,e._)("a",B,[G,(0,e.Wm)(a)])]),(0,e._)("li",null,[(0,e._)("a",J,[K,(0,e.Wm)(a)])]),(0,e._)("li",null,[(0,e._)("a",Q,[X,(0,e.Wm)(a)])])])],64)}]])},3744:(n,s)=>{s.Z=(n,s)=>{for(const[a,e]of s)n[a]=e;return n}},9945:(n,s,a)=>{n.exports=a.p+"assets/img/mind.ee54c7d8.jpg"}}]);